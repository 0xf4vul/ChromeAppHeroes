window.onload=function(){const e={commentList:{netease:"云村",xiami:"虾米",qq:"QQ",migu:"咪咕",fm:"电台",Voice:"Voice",Local:"本地",youtube:"YouTube",Podcast:"播客",song:{id:1769074224,web:"xiami"},songComment:"以上为返回给background的info信息",list:[{album:"天使与魔鬼的对话",artists:["蔡健雅"],id:27747330,name:"被驯服的象"}],listComment:"以上为搜索返回的处理后的结果，设置请求为5条",favourite:"favourite",toplist:"toplist",localsong:"localsong",unableCollect:["fm","Voice","Podcast","youtube","Local"],lyricMenuShow:"显示"},tabList:{netease:NetEase,xiami:XiaMi,qq:QQ,youtube:YouTube,migu:MiGu},PAIDLIST:{netease:[1,4],xiami:[1]},CONST:{startPosition:{x:null,y:null},searchMaxNum:50,searchDefaultNum:5},utils:{alertFlash:function(e,t){$(".alert").html(`${e}`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},t)},dateConvert:e=>{const t=new Date(e);return`${t.getMonth()+1}月${t.getDate()}`},getRandomArbitrary:(e,t)=>Math.random()*(t-e)+e},init:()=>{e.M.initAlertDesc(),e.M.initVoiceStyle(),e.M.initRenderFMModal(),e.M.initLyricsDropStyle(),e.M.initClassicLyrics(),e.M.inigFavouriteDrag(),e.M.renderHistoryDOM(),e.M.handlePlayInfo(),e.M.handleLikeStyle(),e.subscribe.map(e=>{const t=e.event?e.event:"click";e.bind?$(e.base).on(t,e.bind,e.callback):$(e.base).on(t,e.callback)})},method:{initAlertDesc:()=>{chrome.storage.sync.get("install",function(e){e.install&&(setTimeout(()=>{$("#qaModal").modal("show")},1e3),chrome.storage.sync.set({install:!1}))})},initVoiceStyle:()=>{chrome.storage.local.get(null,function(e){if(e.hasOwnProperty("volume")){const t=100*e.volume+"%";$(".voice .controller").css("left",t),$(".voice .line").css("width",t)}})},initRenderFMModal:()=>{let e=document.createDocumentFragment();reginData.Data.map((t,s)=>{let a=document.createElement("span");a.className="label label-default",a.setAttribute("data-id",`${t.id}`),a.innerText=t.title,e.appendChild(a)}),$("#myModal .modal-body").append(e),$("#myModal").modal({backdrop:!1,show:!1})},initLyricsDropStyle:()=>{$(".dropdown-toggle").dropdown(),chrome.storage.sync.get("lyricShow",e=>{!0===e.lyricShow?$("#lyricDropMenu .lyricLinkShow").addClass("show"):!1===e.lyricShow&&$("#lyricDropMenu .lyricLinkHide").addClass("show")})},initClassicLyrics:()=>{$.ajax({url:"http://lemmon.cn/sps",type:"GET",timeout:"2000",success:function(e){$(".lyricbox p.request").html(`\n                            ${e.content}<br><span>- <b class="req-song">${e.song}</b></span>\n                        `),$(".lyricbox p.default").addClass("animate").delay(300).fadeOut(),$(".lyricbox p.request").addClass("show")},error:function(t){console.log("err",t);const s=lyricApi.length,a=parseInt(e.U.getRandomArbitrary(0,s));$(".lyricbox p").html(`\n                            ${lyricApi[a].content}<br><span>- <b class="req-song">${lyricApi[a].song}</b></span>\n                        `),$(".lyricbox p.default").addClass("animate").delay(300).fadeOut(),$(".lyricbox p.request").addClass("show")}})},inigFavouriteDrag:()=>{var t=document.querySelector(".favourite_cont");Sortable.create(t,{animation:180,onEnd:function(t){chrome.storage.sync.get("likeList",function(s){let a=s.likeList[t.oldIndex];s.likeList[t.oldIndex]=s.likeList[t.newIndex],s.likeList[t.newIndex]=a,chrome.storage.sync.set({likeList:s.likeList},t=>{e.M.songLikeList()})})}})},renderHistoryDOM:function(){chrome.storage.local.get("sps_searchlist",function(e){if(e.hasOwnProperty("sps_searchlist")&&e.sps_searchlist.length>0){const t=e.sps_searchlist;let s=document.createDocumentFragment();t.forEach(e=>{let t=document.createElement("li");t.setAttribute("data-search",e),t.innerText=e,s.appendChild(t)}),$("#historyDiv").html(s)}})},handleCustomTheme:function(e){e?e.customTheme&&$(".music header, #likeListPlay, #likeListRandomPlay, .progress .line, .progress .controller").css({background:e.customTheme}):chrome.storage.sync.get(null,function(e){e.customTheme&&$(".music header, #likeListPlay, #likeListRandomPlay, .progress .line, .progress .controller").css({background:e.customTheme})})},handlePlayInfo:()=>{chrome.storage.local.get(null,function(t){const{sps_play:s,sps_song:a,sps_web:l,sps_cover:n}=t,i=e.commentList[l];!0===s?($(".info").html(`\n                            ${i} - ${a}\n                        `),$(".stop .player_play").attr("class","icon player_play hide"),$(".stop .player_pause").attr("class","icon player_pause"),chrome.browserAction.setBadgeText({text:"▶"}),chrome.browserAction.setBadgeBackgroundColor({color:"#277eae"}),!n||e.commentList.unableCollect.includes(l)&&"migu"!==l?($(".music header").attr("style",""),e.M.handleCustomTheme()):$(".music header").css({"background-color":"#000","background-size":"cover","background-image":`linear-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.4) ), url(${n})`})):!1===s?($(".info").html(""),$(".stop .player_pause").attr("class","icon player_pause hide"),$(".stop .player_play").attr("class","icon player_play"),chrome.browserAction.setBadgeText({text:""})):($(".info").html(""),$(".stop .player_play").attr("class","icon player_play hide"),$(".stop .player_pause").attr("class","icon player_pause hide"),chrome.browserAction.setBadgeText({text:""}))})},handleLikeStyle:()=>{chrome.storage.sync.get(null,function(e){const t=e.likeList;chrome.storage.local.get(null,function(e){if(t&&t.length>0){let a=!1;for(var s=0;s<t.length;s++)if(t[s].sps_song_id===e.sps_song_id&&t[s].sps_web===e.sps_web){a=!0;break}a?$(".favourite").eq(0).addClass("select"):$(".favourite").eq(0).removeClass("select")}else $(".favourite").eq(0).removeClass("select")})})},handleRadioCustom:()=>{chrome.storage.sync.get(null,function(e){$(".lyricbox").addClass("hide");let t=document.createDocumentFragment();const s=document.createElement("div");s.className="self-add-wrap",s.innerHTML='\n                        <input type="text" class="form-control radio-add-input" placeholder="Name" id="radio-name"> <b>-</b> \n                        <input type="text" class="form-control radio-add-input radio-add-url" id="radio-url" placeholder="Url">\n                        <span class="input-group-btn">\n                            <button class="btn btn-default" type="button" id="radio-submit">+</button>\n                        </span>\n                    ',t.appendChild(s),e.selfRadio&&e.selfRadio.forEach(e=>{let s=document.createElement("li");s.className="self-radio-li",s.innerHTML=`\n                            <dl>\n                                <dt>${e.name}</dt>\n                            </dl>\n                            <span>\n                                <svg data-url=${e.url} data-name=${e.name} t="1519384078654" class="custom" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M215.618291 917.834029c-55.520501 0-93.25901-44.607964-93.25901-110.988814l0-671.442362c0-66.38085 37.738509-110.98779 93.285616-110.98779 21.22951 0 43.632753 6.590092 66.121953 19.571754L810.298362 380.317888c39.064714 22.529109 61.195757 55.017034 61.195757 90.87266 0 35.815717-22.01234 68.263733-62.018495 91.362824L282.721595 897.664663C259.224438 911.256216 236.847801 917.834029 215.618291 917.834029zM215.644897 78.729086c-34.794457 0-38.971593 39.634696-38.971593 56.673767l0 671.442362c0 17.040095 4.177136 56.67479 38.944987 56.67479 11.403724 0 25.028023-4.242627 38.965453-12.292977l526.661931-335.111291c23.165606-13.406335 35.933397-29.556153 35.933397-44.925189 0-15.408945-12.728906-31.598672-34.967396-44.435025L253.588067 90.424452C240.66064 82.985016 227.061924 78.729086 215.644897 78.729086z" p-id="4450" fill="#cdcdcd"></path><path d="M485.556233 647.034463c-4.52199 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.338359-2.081405-14.719236 4.25593-18.723434l7.333012-4.615111c6.351662-3.978614 14.731516-2.094708 18.723434 4.270257 4.00522 6.337335 2.095731 14.718213-4.25593 18.72241l-7.333012 4.616134C490.528478 646.357034 488.022401 647.034463 485.556233 647.034463z" p-id="4451" fill="#cdcdcd"></path><path d="M286.639834 772.143878c-4.520967 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.337335-2.081405-14.731516 4.269233-18.72241l152.386666-95.859231c6.338359-3.964288 14.719236-2.094708 18.723434 4.270257 3.990894 6.337335 2.082428 14.731516-4.269233 18.723434l-152.386666 95.858208C291.612079 771.468496 289.106002 772.143878 286.639834 772.143878z" p-id="4452" fill="#cdcdcd"></path></svg>\n                            </span>\n                            <div class="del">\n                                    <svg t="1532882657712" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1618" xmlns:xlink="http://www.w3.org/1999/xlink" width="26" height="26"><defs><style type="text/css"></style></defs><path d="M608 735.984c0 8.848 7.152 16 16 16 8.832 0 16-7.152 16-16l0-320c0-8.832-7.168-16-16-16-8.848 0-16 7.168-16 16L608 735.984z" p-id="1619" fill="#ffffff"></path><path d="M896 255.984l-25.152 0L816 255.984l-32 0-96 0 0-48c0-12.352-4.8-23.488-12.448-32-8.8-9.744-21.392-16-35.552-16L416 159.984c-14.16 0-26.752 6.256-35.552 16-7.664 8.512-12.464 19.648-12.464 32l0 48-96 0-32 0-61.712 0L160 255.984c-8.848 0-16 7.152-16 16 0 8.832 7.168 16 16 16l80 0 0 544.064c0 53.008 26.992 80 80 80l416 0c52.992 0 80-26.992 80-80L816 287.984l80 0c8.816 0 16-7.152 16-16S904.816 255.984 896 255.984zM400 223.984c0-17.68 14.32-32 32-32l192 0c17.664 0 32 14.32 32 32l0 32L400 255.984 400 223.984zM784 831.984c0 35.344-12.672 48-48 48L320 879.984c-35.344 0-48-12.656-48-48l0-544 512 0L784 831.984z" p-id="1620" fill="#ffffff"></path><path d="M416 735.984c0 8.848 7.168 16 16 16 8.832 0 16-7.152 16-16l0-320c0-8.832-7.168-16-16-16-8.832 0-16 7.168-16 16L416 735.984z" p-id="1621" fill="#ffffff"></path></svg>\n                                </div>\n                            `,t.appendChild(s)}),$(".radio article > ul").html(t)})},renderSongListPage:(t,s)=>{$(".lyricbox").addClass("hide"),$(".toplist_cont").addClass("hide"),$(".local_cont").addClass("hide");let a=document.createDocumentFragment();s.map((s,l)=>{let n=document.createElement("li");n.className="youtube"===t?"youtube":"";let i=s.name;s.name.indexOf(" ")>0&&(i=s.name.replace(/\s/g,"_"));const o=s.album?s.album:"-",c=s.artists[0]?s.artists[0]:"Anonymous",d=`\n                    <dl>\n                        <dt>${s.name}</dt>\n                        <dd>${c} | ${o} </dd>\n                    </dl>\n                    `;let r,p,h;s.id=s.migu_id?s.migu_id:s.id;try{h=`\n                        <span class="open_span">\n                            <svg t="1553094862876" data-web=${t} data-page=${s.page} class="icon open_icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5011" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M895.739313 831.783187c0 34.726919-29.199019 63.956637-63.956637 63.956637l-641.659035 1.061169c-34.726919 0-62.894446-28.167526-62.894446-62.956867l1.030469-641.627313c0-34.788318 29.199019-63.956637 63.956637-63.956637l351.761506 0 0-63.956637-351.761506 0c-69.484537 0-127.913275 71.01438-127.913275 140.468219L64.303027 833.844126c0 69.51626 56.337099 125.852336 125.820614 125.852336l629.073392 0c69.483514 0 140.498918-58.46046 140.498918-127.913275l0-351.761506-63.956637 0L895.739313 831.783187zM926.99927 64.303538 703.869401 64.303538c-18.143219 0-31.94762 14.678304-31.978319 31.978319-0.031722 17.301038 13.8351 31.978319 31.978319 31.978319l140.529617-1.061169L361.944937 587.386968c-12.771885 12.178367-12.771885 31.914874 0 44.094264 12.742209 12.17939 33.44574 12.17939 46.219671 0l486.606657-464.183971 0.968048 152.833851c-0.031722 17.300015 13.8351 31.978319 31.978319 31.978319 18.143219-0.062422 31.946596-14.678304 31.978319-31.978319L959.69595 95.470375C959.726649 78.169337 945.173189 64.24214 926.99927 64.303538z" p-id="5012" fill="#cdcdcd"></path></svg>\n                        </span>\n                        `,p=`\n                        <span class="range_span" data-toggle="modal" data-target="#rangeModal"\n                            data-id=${s.id} data-web=${t} data-name=${i} data-duration=${s.duration} data-artist=${s.artists[0]} data-cover=${s.cover} data-page=${s.page}\n                        >\n                            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                class="icon range_icon"\n                            >\n                                <path d="M17.621625,0.0080625 L3.247125,0.0080625 C1.46503535,0.00971641258 0.0207789126,1.45397285 0.019125,3.2360625 L0.019125,17.6120625 C0.019125,19.3925625 1.466625,20.8400625 3.247125,20.8400625 L17.621625,20.8400625 C19.4033725,20.8375838 20.8471463,19.39381 20.849625,17.6120625 L20.849625,3.2375625 C20.8487982,1.45488709 19.4042998,0.00971753164 17.621625,0.0080625 Z M17.623125,19.5028171 L3.33451116,19.5028171 C1.96663484,19.5011641 1.61708405,18.9814388 1.61543103,17.6135625 L1.61543103,3.2375625 C1.61543103,1.8710625 1.96801116,1.65393921 3.33451116,1.65393921 L16.9023024,1.65393921 C18.2688024,1.65393921 19.4451113,1.8710625 19.4451113,3.2375625 L19.4451113,17.6135625 C19.4466113,18.9800625 18.989625,19.5028171 17.623125,19.5028171 Z"\n                                    id="Shape" fill-rule="nonzero" fill="#cdcdcd"></path>\n                                <path d="M14.165625,7.3265625 C14.0121539,7.1974948 13.7880961,7.1974948 13.634625,7.3265625 C13.5645546,7.38469743 13.5240112,7.47101567 13.5240112,7.5620625 C13.5240112,7.65310933 13.5645546,7.73942757 13.634625,7.7975625 L16.130625,10.0145625 L4.664625,10.0145625 L7.235625,7.7300625 C7.30569535,7.67192757 7.34623884,7.58560933 7.34623884,7.4945625 C7.34623884,7.40351567 7.30569535,7.31719743 7.235625,7.2590625 C7.08215391,7.1299948 6.85809609,7.1299948 6.704625,7.2590625 L3.445125,10.1555625 C3.37505465,10.2136974 3.33451116,10.3000157 3.33451116,10.3910625 C3.33451116,10.4821093 3.37505465,10.5684276 3.445125,10.6265625 L6.706125,13.5215625 C6.853125,13.6505625 7.090125,13.6505625 7.237125,13.5215625 C7.384125,13.3925625 7.384125,13.1810625 7.237125,13.0520625 L4.661625,10.7645625 L16.286625,10.7645625 L13.634625,13.1195625 C13.487625,13.2500625 13.487625,13.4615625 13.634625,13.5890625 C13.781625,13.7165625 14.018625,13.7180625 14.165625,13.5890625 L17.426625,10.6925625 C17.4966954,10.6344276 17.5372388,10.5481093 17.5372388,10.4570625 C17.5372388,10.3660157 17.4966954,10.2796974 17.426625,10.2215625 L14.165625,7.3265625 Z"\n                                    id="Path" fill="#cdcdcd"></path>\n                            </svg>\n                        </span>\n                        `,r=e.PAIDLIST.xiami.includes(s.xiami)||e.PAIDLIST.netease.includes(s.netease)?`\n                            <span>\n                            <svg data-id=${s.id} data-web=${t} data-name=${i} data-artist=${s.artists[0]} data-duration=${s.duration} data-cover=${s.cover} data-page=${s.page} t="1521558633839" class="paid" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8563" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32"><defs><style type="text/css"></style></defs><path d="M750.380138 258.401103c-130.153931-130.08331-341.168552-139.758345-482.092138-22.845793l-37.464276-26.306207c-11.440552-8.015448-20.691862-3.213241-20.691862 10.875587v106.001655c0 13.982897 9.321931 18.785103 20.691862 10.840276l70.126345-49.293242c10.20469-7.20331 10.734345-18.149517 2.754207-26.235586 124.186483-96.008828 304.587034-85.486345 416.873931 26.729931a315.321379 315.321379 0 0 1 92.866207 223.796966 313.908966 313.908966 0 0 1-92.442483 223.549793 313.732414 313.732414 0 0 1-223.26731 92.442483l-0.282483-0.035311a315.074207 315.074207 0 0 1-223.761655-92.866207 314.791724 314.791724 0 0 1-65.041655-93.996138 21.080276 21.080276 0 1 0-38.452966 17.231449 358.4 358.4 0 0 0 73.657379 106.601931 356.493241 356.493241 0 0 0 253.563587 105.189517h0.317793c95.620414 0 185.485241-37.217103 253.033931-104.836414 67.61931-67.61931 104.907034-157.590069 104.836414-253.351724s-37.499586-185.732414-105.224828-253.492966z" fill="#cdcdcd" p-id="8564"></path><path d="M624.67531 342.016c-18.573241 0-40.854069 13.312-49.681655 29.73131l-75.422896 139.758345-75.458207-139.758345c-8.827586-16.41931-31.108414-29.73131-49.716966-29.73131h-17.372689l105.330758 185.485241h-76.446896v0.564966c0 13.982897 11.29931 25.317517 25.317517 25.317517h65.606621v50.635035h-90.924138v0.600275c0 13.982897 11.29931 25.317517 25.317517 25.317518h65.606621l0.635586 59.038896c0.105931 13.982897 11.369931 23.234207 19.067586 21.821793 13.100138 0 24.046345-11.22869 24.364138-25.282207l1.412414-55.578482h66.206896a25.211586 25.211586 0 0 0 25.246897-25.317518v-0.600275h-91.453793v-50.635035h66.206896a25.211586 25.211586 0 0 0 25.246897-25.352827v-0.529656h-77.011862l105.366069-185.485241h-17.443311z" fill="#cdcdcd" p-id="8565"></path></svg>\n                            </span>\n                            `:`\n                            <span class="play_span">\n                                <svg data-id=${s.id} data-web=${t} data-name=${i} data-artist=${s.artists[0]} data-duration=${s.duration} data-cover=${s.cover} data-page=${s.page} t="1519384078654" class="icon play_icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M215.618291 917.834029c-55.520501 0-93.25901-44.607964-93.25901-110.988814l0-671.442362c0-66.38085 37.738509-110.98779 93.285616-110.98779 21.22951 0 43.632753 6.590092 66.121953 19.571754L810.298362 380.317888c39.064714 22.529109 61.195757 55.017034 61.195757 90.87266 0 35.815717-22.01234 68.263733-62.018495 91.362824L282.721595 897.664663C259.224438 911.256216 236.847801 917.834029 215.618291 917.834029zM215.644897 78.729086c-34.794457 0-38.971593 39.634696-38.971593 56.673767l0 671.442362c0 17.040095 4.177136 56.67479 38.944987 56.67479 11.403724 0 25.028023-4.242627 38.965453-12.292977l526.661931-335.111291c23.165606-13.406335 35.933397-29.556153 35.933397-44.925189 0-15.408945-12.728906-31.598672-34.967396-44.435025L253.588067 90.424452C240.66064 82.985016 227.061924 78.729086 215.644897 78.729086z" p-id="4450" fill="#cdcdcd"></path><path d="M485.556233 647.034463c-4.52199 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.338359-2.081405-14.719236 4.25593-18.723434l7.333012-4.615111c6.351662-3.978614 14.731516-2.094708 18.723434 4.270257 4.00522 6.337335 2.095731 14.718213-4.25593 18.72241l-7.333012 4.616134C490.528478 646.357034 488.022401 647.034463 485.556233 647.034463z" p-id="4451" fill="#cdcdcd"></path><path d="M286.639834 772.143878c-4.520967 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.337335-2.081405-14.731516 4.269233-18.72241l152.386666-95.859231c6.338359-3.964288 14.719236-2.094708 18.723434 4.270257 3.990894 6.337335 2.082428 14.731516-4.269233 18.723434l-152.386666 95.858208C291.612079 771.468496 289.106002 772.143878 286.639834 772.143878z" p-id="4452" fill="#cdcdcd"></path></svg>\n                            </span>\n                            `}catch(e){}let m=`\n                            <div class="fav" data-id=${s.id} data-web=${t} data-name=${i} data-duration=${s.duration} data-artist=${s.artists[0]} data-cover=${s.cover} data-page=${s.page}>\n                                <svg t="1529741031163" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1954" xmlns:xlink="http://www.w3.org/1999/xlink" width="26" height="26"><defs><style type="text/css"></style></defs><path d="M953.903525 374.597607c-0.539282 7.172353-1.065262 14.34573-1.620917 21.517059-2.868327 36.999682-13.000082 72.074525-29.305443 105.235786-26.372647 53.638641-59.652612 102.738919-98.68765 148.022265-42.319851 49.093115-88.287789 94.559633-136.064932 138.256854-45.841048 41.926902-93.324502 81.921801-141.966339 120.555703-12.014638 9.54233-25.199938 14.910595-40.799218 13.325493-10.536984-1.070378-19.735483-5.29254-27.90863-11.768021-86.809111-68.778456-170.041768-141.531434-246.068302-222.239594-43.699268-46.390563-82.991156-96.128361-114.648157-151.665235-18.669198-32.750915-34.576493-66.61928-41.974997-103.814414-2.946099-14.811334-4.137227-29.971615-6.131651-44.972261-0.206708-1.553379-0.448208-3.101641-0.673335-4.652973 0-8.378831 0-16.757662 0-25.136493 0.286526-1.685385 0.677429-3.361561 0.843204-5.059226 0.701988-7.181563 1.02126-14.415314 2.045589-21.548782 7.463995-51.965535 26.5374-99.119485 59.960627-139.835815 43.541679-53.043077 98.837052-85.024465 167.968549-91.090625 35.568077-3.121084 69.935816 2.306532 103.06433 15.488763 37.759999 15.025205 69.594031 38.372959 96.105848 69.071122 4.311189 4.992711 8.40953 10.168594 12.904914 15.621792 1.2689-1.573845 2.355651-2.871397 3.387144-4.209882 21.905916-28.40084 48.380894-51.52449 79.980589-68.560492C640.726803 102.114702 690.157609 93.252871 742.156914 102.019535c60.551074 10.208503 109.529579 40.862663 148.105153 88.101547 36.941354 45.237297 57.025785 97.480148 62.065568 155.578358 0.60989 7.024997 1.054005 14.06432 1.574868 21.097504C953.903525 369.396141 953.903525 371.997386 953.903525 374.597607zM898.728902 371.052874c-0.6191-8.346085-0.99363-16.718777-1.89721-25.03314-5.063319-46.553269-22.228257-88.057545-53.768601-122.822326-42.201148-46.514383-94.556563-69.004607-157.803026-62.721507-43.496653 4.320399-80.099293 23.566742-111.041002 54.027497-20.995173 20.669762-36.102243 45.25367-47.571459 72.210625-2.979868 7.003508-7.963369 11.42726-15.755846 11.453866-7.812943 0.026606-12.828167-4.431939-15.813151-11.397584-9.66615-22.556739-21.629623-43.738154-38.071084-62.10343-35.843346-40.037878-79.982636-63.324234-134.297682-65.148789-50.1594-1.684362-94.006024 15.162328-129.962957 49.536206-59.815317 57.181327-79.199807 127.835504-64.35061 208.373795 5.638417 30.582529 19.49296 58.090023 34.577516 84.993766 30.517037 54.429657 69.413929 102.484116 112.274086 147.477866 71.876004 75.453483 150.243863 143.722332 231.604892 208.66646 3.069919 2.450818 4.858658 2.50403 7.960299 0.030699 45.74895-36.479843 90.509387-74.122161 133.786029-113.508193 47.140647-42.902112 92.65833-87.404676 134.357034-135.719054 37.751812-43.741223 69.933769-91.109044 94.385671-143.530974C891.321188 435.866019 898.244878 404.190599 898.728902 371.052874z" p-id="1955" fill="#fff"></path></svg>\n                            </div>\n                        `;n.innerHTML="youtube"===t?d+h+r:d+h+p+r+m,a.appendChild(n)}),$(".music article > ul.search_cont").html(a)},songList:(t,s)=>{const a=s.split("##"),l=a[0],n=parseInt(a[1]);let i;i=n&&n<=e.CONST.searchMaxNum?n:n&&n>e.CONST.searchMaxNum?e.CONST.searchMaxNum:e.CONST.searchDefaultNum,e.tabList[t].list(l,i).then(a=>{e.M.renderSongListPage(t,a),chrome.storage.local.set({lastSearch:"song"},()=>{Pod.M.updateDB({search:s,web:t,searchList:a,type:"song"})})})},songLikeList:()=>{chrome.storage.sync.get("likeList",function(t){let s=document.createDocumentFragment(),a=[];t.likeList&&t.likeList.map(t=>{t.sps_web&&!e.commentList.unableCollect.includes(t.sps_web)&&a.push(t)}),a.length>0?(a.map((t,a)=>{let l=document.createElement("li");const n=`\n                            <dl>\n                                <dt>${t.sps_song}</dt>\n                                <dd>${t.sps_artist} | ${e.commentList[t.sps_web]}</dd>\n                            </dl>\n                            `,i=t.sps_cover?t.sps_cover:0,o=t.sps_page?t.sps_page:0;let c="",d=`\n                            <span class="open_span">\n                                <svg t="1553094862876" data-web=${t.sps_web} data-page=${o} class="icon open_icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5011" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M895.739313 831.783187c0 34.726919-29.199019 63.956637-63.956637 63.956637l-641.659035 1.061169c-34.726919 0-62.894446-28.167526-62.894446-62.956867l1.030469-641.627313c0-34.788318 29.199019-63.956637 63.956637-63.956637l351.761506 0 0-63.956637-351.761506 0c-69.484537 0-127.913275 71.01438-127.913275 140.468219L64.303027 833.844126c0 69.51626 56.337099 125.852336 125.820614 125.852336l629.073392 0c69.483514 0 140.498918-58.46046 140.498918-127.913275l0-351.761506-63.956637 0L895.739313 831.783187zM926.99927 64.303538 703.869401 64.303538c-18.143219 0-31.94762 14.678304-31.978319 31.978319-0.031722 17.301038 13.8351 31.978319 31.978319 31.978319l140.529617-1.061169L361.944937 587.386968c-12.771885 12.178367-12.771885 31.914874 0 44.094264 12.742209 12.17939 33.44574 12.17939 46.219671 0l486.606657-464.183971 0.968048 152.833851c-0.031722 17.300015 13.8351 31.978319 31.978319 31.978319 18.143219-0.062422 31.946596-14.678304 31.978319-31.978319L959.69595 95.470375C959.726649 78.169337 945.173189 64.24214 926.99927 64.303538z" p-id="5012" fill="#cdcdcd"></path></svg>\n                            </span>\n                            `;t.sps_duration&&(c=`\n                                <span class="range_span" data-toggle="modal" data-target="#rangeModal"\n                                    data-id=${t.sps_song_id} data-web=${t.sps_web} data-name=${t.sps_song} data-duration=${t.sps_duration} data-artist=${t.sps_artist} data-cover=${i} data-page=${o}\n                                >\n                                    <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                        class="icon range_icon"\n                                    >\n                                        <path d="M17.621625,0.0080625 L3.247125,0.0080625 C1.46503535,0.00971641258 0.0207789126,1.45397285 0.019125,3.2360625 L0.019125,17.6120625 C0.019125,19.3925625 1.466625,20.8400625 3.247125,20.8400625 L17.621625,20.8400625 C19.4033725,20.8375838 20.8471463,19.39381 20.849625,17.6120625 L20.849625,3.2375625 C20.8487982,1.45488709 19.4042998,0.00971753164 17.621625,0.0080625 Z M17.623125,19.5028171 L3.33451116,19.5028171 C1.96663484,19.5011641 1.61708405,18.9814388 1.61543103,17.6135625 L1.61543103,3.2375625 C1.61543103,1.8710625 1.96801116,1.65393921 3.33451116,1.65393921 L16.9023024,1.65393921 C18.2688024,1.65393921 19.4451113,1.8710625 19.4451113,3.2375625 L19.4451113,17.6135625 C19.4466113,18.9800625 18.989625,19.5028171 17.623125,19.5028171 Z"\n                                            id="Shape" fill-rule="nonzero" fill="#cdcdcd"></path>\n                                        <path d="M14.165625,7.3265625 C14.0121539,7.1974948 13.7880961,7.1974948 13.634625,7.3265625 C13.5645546,7.38469743 13.5240112,7.47101567 13.5240112,7.5620625 C13.5240112,7.65310933 13.5645546,7.73942757 13.634625,7.7975625 L16.130625,10.0145625 L4.664625,10.0145625 L7.235625,7.7300625 C7.30569535,7.67192757 7.34623884,7.58560933 7.34623884,7.4945625 C7.34623884,7.40351567 7.30569535,7.31719743 7.235625,7.2590625 C7.08215391,7.1299948 6.85809609,7.1299948 6.704625,7.2590625 L3.445125,10.1555625 C3.37505465,10.2136974 3.33451116,10.3000157 3.33451116,10.3910625 C3.33451116,10.4821093 3.37505465,10.5684276 3.445125,10.6265625 L6.706125,13.5215625 C6.853125,13.6505625 7.090125,13.6505625 7.237125,13.5215625 C7.384125,13.3925625 7.384125,13.1810625 7.237125,13.0520625 L4.661625,10.7645625 L16.286625,10.7645625 L13.634625,13.1195625 C13.487625,13.2500625 13.487625,13.4615625 13.634625,13.5890625 C13.781625,13.7165625 14.018625,13.7180625 14.165625,13.5890625 L17.426625,10.6925625 C17.4966954,10.6344276 17.5372388,10.5481093 17.5372388,10.4570625 C17.5372388,10.3660157 17.4966954,10.2796974 17.426625,10.2215625 L14.165625,7.3265625 Z"\n                                            id="Path" fill="#cdcdcd"></path>\n                                    </svg>\n                                </span>\n                                `);let r=`\n                                <span>\n                                    <svg data-id=${t.sps_song_id} data-web=${t.sps_web} data-name=${t.sps_song} data-duration=${t.sps_duration} data-artist=${t.sps_artist} data-cover=${i} data-page=${o} t="1519384078654" class="icon play_icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M215.618291 917.834029c-55.520501 0-93.25901-44.607964-93.25901-110.988814l0-671.442362c0-66.38085 37.738509-110.98779 93.285616-110.98779 21.22951 0 43.632753 6.590092 66.121953 19.571754L810.298362 380.317888c39.064714 22.529109 61.195757 55.017034 61.195757 90.87266 0 35.815717-22.01234 68.263733-62.018495 91.362824L282.721595 897.664663C259.224438 911.256216 236.847801 917.834029 215.618291 917.834029zM215.644897 78.729086c-34.794457 0-38.971593 39.634696-38.971593 56.673767l0 671.442362c0 17.040095 4.177136 56.67479 38.944987 56.67479 11.403724 0 25.028023-4.242627 38.965453-12.292977l526.661931-335.111291c23.165606-13.406335 35.933397-29.556153 35.933397-44.925189 0-15.408945-12.728906-31.598672-34.967396-44.435025L253.588067 90.424452C240.66064 82.985016 227.061924 78.729086 215.644897 78.729086z" p-id="4450" fill="#cdcdcd"></path><path d="M485.556233 647.034463c-4.52199 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.338359-2.081405-14.719236 4.25593-18.723434l7.333012-4.615111c6.351662-3.978614 14.731516-2.094708 18.723434 4.270257 4.00522 6.337335 2.095731 14.718213-4.25593 18.72241l-7.333012 4.616134C490.528478 646.357034 488.022401 647.034463 485.556233 647.034463z" p-id="4451" fill="#cdcdcd"></path><path d="M286.639834 772.143878c-4.520967 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.337335-2.081405-14.731516 4.269233-18.72241l152.386666-95.859231c6.338359-3.964288 14.719236-2.094708 18.723434 4.270257 3.990894 6.337335 2.082428 14.731516-4.269233 18.723434l-152.386666 95.858208C291.612079 771.468496 289.106002 772.143878 286.639834 772.143878z" p-id="4452" fill="#cdcdcd"></path></svg>\n                                </span>\n                                `;l.innerHTML=n+d+c+r+'\n                                <div class="del">\n                                    <svg t="1532882657712" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1618" xmlns:xlink="http://www.w3.org/1999/xlink" width="26" height="26"><defs><style type="text/css"></style></defs><path d="M608 735.984c0 8.848 7.152 16 16 16 8.832 0 16-7.152 16-16l0-320c0-8.832-7.168-16-16-16-8.848 0-16 7.168-16 16L608 735.984z" p-id="1619" fill="#ffffff"></path><path d="M896 255.984l-25.152 0L816 255.984l-32 0-96 0 0-48c0-12.352-4.8-23.488-12.448-32-8.8-9.744-21.392-16-35.552-16L416 159.984c-14.16 0-26.752 6.256-35.552 16-7.664 8.512-12.464 19.648-12.464 32l0 48-96 0-32 0-61.712 0L160 255.984c-8.848 0-16 7.152-16 16 0 8.832 7.168 16 16 16l80 0 0 544.064c0 53.008 26.992 80 80 80l416 0c52.992 0 80-26.992 80-80L816 287.984l80 0c8.816 0 16-7.152 16-16S904.816 255.984 896 255.984zM400 223.984c0-17.68 14.32-32 32-32l192 0c17.664 0 32 14.32 32 32l0 32L400 255.984 400 223.984zM784 831.984c0 35.344-12.672 48-48 48L320 879.984c-35.344 0-48-12.656-48-48l0-544 512 0L784 831.984z" p-id="1620" fill="#ffffff"></path><path d="M416 735.984c0 8.848 7.168 16 16 16 8.832 0 16-7.152 16-16l0-320c0-8.832-7.168-16-16-16-8.832 0-16 7.168-16 16L416 735.984z" p-id="1621" fill="#ffffff"></path></svg>\n                                </div>\n                            ',s.appendChild(l)}),$(".music article > ul.favourite_cont").html(s)):$(".music article > ul.favourite_cont").html("\n                            <li>\n                            <dl>\n                                <dt>v2.0.0起</dt>\n                                <dd>支持歌曲收藏</dd>\n                            </dl>\n                            </li>\n                            <li>\n                            <dl>\n                                <dt>收藏说明</dt>\n                                <dd>同一Google账号原则上可以在不同电脑同步</dd>\n                            </dl>\n                            </li>\n                            <li>\n                            <dl>\n                                <dt>注意事项</dt>\n                                <dd>因Chrome存储限制，收藏暂不能超过40条</dd>\n                            </dl>\n                            </li>\n                        ")})},songTopList:t=>{$(".music article > ul.toplist_cont>li").remove(),NetEase.toplist(t).then(t=>{let s=document.createDocumentFragment(),a=[];t.data.map((e,t)=>{a.push({sps_artist:e.artists[0],sps_song:e.name,sps_song_id:e.id,sps_web:"netease",sps_cover:e.cover,sps_page:e.id});let l=document.createElement("li"),n=e.name;e.name.indexOf(" ")>0&&(n=e.name.replace(/\s/g,"_"));const i=`\n                        <dl>\n                            <dt>${e.name}</dt>\n                            <dd>${e.artists[0]}</dd>\n                        </dl>\n                        `;let o=`\n                            <span class="open_span">\n                                <svg t="1553094862876" data-web="netease" data-page=${e.page} class="icon open_icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5011" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M895.739313 831.783187c0 34.726919-29.199019 63.956637-63.956637 63.956637l-641.659035 1.061169c-34.726919 0-62.894446-28.167526-62.894446-62.956867l1.030469-641.627313c0-34.788318 29.199019-63.956637 63.956637-63.956637l351.761506 0 0-63.956637-351.761506 0c-69.484537 0-127.913275 71.01438-127.913275 140.468219L64.303027 833.844126c0 69.51626 56.337099 125.852336 125.820614 125.852336l629.073392 0c69.483514 0 140.498918-58.46046 140.498918-127.913275l0-351.761506-63.956637 0L895.739313 831.783187zM926.99927 64.303538 703.869401 64.303538c-18.143219 0-31.94762 14.678304-31.978319 31.978319-0.031722 17.301038 13.8351 31.978319 31.978319 31.978319l140.529617-1.061169L361.944937 587.386968c-12.771885 12.178367-12.771885 31.914874 0 44.094264 12.742209 12.17939 33.44574 12.17939 46.219671 0l486.606657-464.183971 0.968048 152.833851c-0.031722 17.300015 13.8351 31.978319 31.978319 31.978319 18.143219-0.062422 31.946596-14.678304 31.978319-31.978319L959.69595 95.470375C959.726649 78.169337 945.173189 64.24214 926.99927 64.303538z" p-id="5012" fill="#cdcdcd"></path></svg>\n                            </span>\n                        `,c=`\n                            <span class="range_span" data-toggle="modal" data-target="#rangeModal" data-id=${e.id} data-web="netease" data-name=${n} data-duration=${e.duration} data-artist=${e.artists[0]} data-cover=${e.cover} data-page=${e.page}>\n                                <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                    class="icon range_icon"\n                                >\n                                    <path d="M17.621625,0.0080625 L3.247125,0.0080625 C1.46503535,0.00971641258 0.0207789126,1.45397285 0.019125,3.2360625 L0.019125,17.6120625 C0.019125,19.3925625 1.466625,20.8400625 3.247125,20.8400625 L17.621625,20.8400625 C19.4033725,20.8375838 20.8471463,19.39381 20.849625,17.6120625 L20.849625,3.2375625 C20.8487982,1.45488709 19.4042998,0.00971753164 17.621625,0.0080625 Z M17.623125,19.5028171 L3.33451116,19.5028171 C1.96663484,19.5011641 1.61708405,18.9814388 1.61543103,17.6135625 L1.61543103,3.2375625 C1.61543103,1.8710625 1.96801116,1.65393921 3.33451116,1.65393921 L16.9023024,1.65393921 C18.2688024,1.65393921 19.4451113,1.8710625 19.4451113,3.2375625 L19.4451113,17.6135625 C19.4466113,18.9800625 18.989625,19.5028171 17.623125,19.5028171 Z"\n                                        id="Shape" fill-rule="nonzero" fill="#cdcdcd"></path>\n                                    <path d="M14.165625,7.3265625 C14.0121539,7.1974948 13.7880961,7.1974948 13.634625,7.3265625 C13.5645546,7.38469743 13.5240112,7.47101567 13.5240112,7.5620625 C13.5240112,7.65310933 13.5645546,7.73942757 13.634625,7.7975625 L16.130625,10.0145625 L4.664625,10.0145625 L7.235625,7.7300625 C7.30569535,7.67192757 7.34623884,7.58560933 7.34623884,7.4945625 C7.34623884,7.40351567 7.30569535,7.31719743 7.235625,7.2590625 C7.08215391,7.1299948 6.85809609,7.1299948 6.704625,7.2590625 L3.445125,10.1555625 C3.37505465,10.2136974 3.33451116,10.3000157 3.33451116,10.3910625 C3.33451116,10.4821093 3.37505465,10.5684276 3.445125,10.6265625 L6.706125,13.5215625 C6.853125,13.6505625 7.090125,13.6505625 7.237125,13.5215625 C7.384125,13.3925625 7.384125,13.1810625 7.237125,13.0520625 L4.661625,10.7645625 L16.286625,10.7645625 L13.634625,13.1195625 C13.487625,13.2500625 13.487625,13.4615625 13.634625,13.5890625 C13.781625,13.7165625 14.018625,13.7180625 14.165625,13.5890625 L17.426625,10.6925625 C17.4966954,10.6344276 17.5372388,10.5481093 17.5372388,10.4570625 C17.5372388,10.3660157 17.4966954,10.2796974 17.426625,10.2215625 L14.165625,7.3265625 Z"\n                                        id="Path" fill="#cdcdcd"></path>\n                                </svg>\n                            </span>\n                            `,d=`\n                            <span>\n                                <svg data-id=${e.id} data-web="netease" data-name=${n} data-duration=${e.duration} data-artist=${e.artists[0]} data-cover=${e.cover} data-page=${e.page} t="1519384078654" class="icon play_icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M215.618291 917.834029c-55.520501 0-93.25901-44.607964-93.25901-110.988814l0-671.442362c0-66.38085 37.738509-110.98779 93.285616-110.98779 21.22951 0 43.632753 6.590092 66.121953 19.571754L810.298362 380.317888c39.064714 22.529109 61.195757 55.017034 61.195757 90.87266 0 35.815717-22.01234 68.263733-62.018495 91.362824L282.721595 897.664663C259.224438 911.256216 236.847801 917.834029 215.618291 917.834029zM215.644897 78.729086c-34.794457 0-38.971593 39.634696-38.971593 56.673767l0 671.442362c0 17.040095 4.177136 56.67479 38.944987 56.67479 11.403724 0 25.028023-4.242627 38.965453-12.292977l526.661931-335.111291c23.165606-13.406335 35.933397-29.556153 35.933397-44.925189 0-15.408945-12.728906-31.598672-34.967396-44.435025L253.588067 90.424452C240.66064 82.985016 227.061924 78.729086 215.644897 78.729086z" p-id="4450" fill="#cdcdcd"></path><path d="M485.556233 647.034463c-4.52199 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.338359-2.081405-14.719236 4.25593-18.723434l7.333012-4.615111c6.351662-3.978614 14.731516-2.094708 18.723434 4.270257 4.00522 6.337335 2.095731 14.718213-4.25593 18.72241l-7.333012 4.616134C490.528478 646.357034 488.022401 647.034463 485.556233 647.034463z" p-id="4451" fill="#cdcdcd"></path><path d="M286.639834 772.143878c-4.520967 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.337335-2.081405-14.731516 4.269233-18.72241l152.386666-95.859231c6.338359-3.964288 14.719236-2.094708 18.723434 4.270257 3.990894 6.337335 2.082428 14.731516-4.269233 18.723434l-152.386666 95.858208C291.612079 771.468496 289.106002 772.143878 286.639834 772.143878z" p-id="4452" fill="#cdcdcd"></path></svg>\n                            </span>\n                            `,r=`\n                                <div class="fav" data-id=${e.id} data-web="netease" data-name=${n} data-duration=${e.duration} data-artist=${e.artists[0]} data-cover=${e.cover} data-page=${e.page}>\n                                    <svg t="1529741031163" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1954" xmlns:xlink="http://www.w3.org/1999/xlink" width="26" height="26"><defs><style type="text/css"></style></defs><path d="M953.903525 374.597607c-0.539282 7.172353-1.065262 14.34573-1.620917 21.517059-2.868327 36.999682-13.000082 72.074525-29.305443 105.235786-26.372647 53.638641-59.652612 102.738919-98.68765 148.022265-42.319851 49.093115-88.287789 94.559633-136.064932 138.256854-45.841048 41.926902-93.324502 81.921801-141.966339 120.555703-12.014638 9.54233-25.199938 14.910595-40.799218 13.325493-10.536984-1.070378-19.735483-5.29254-27.90863-11.768021-86.809111-68.778456-170.041768-141.531434-246.068302-222.239594-43.699268-46.390563-82.991156-96.128361-114.648157-151.665235-18.669198-32.750915-34.576493-66.61928-41.974997-103.814414-2.946099-14.811334-4.137227-29.971615-6.131651-44.972261-0.206708-1.553379-0.448208-3.101641-0.673335-4.652973 0-8.378831 0-16.757662 0-25.136493 0.286526-1.685385 0.677429-3.361561 0.843204-5.059226 0.701988-7.181563 1.02126-14.415314 2.045589-21.548782 7.463995-51.965535 26.5374-99.119485 59.960627-139.835815 43.541679-53.043077 98.837052-85.024465 167.968549-91.090625 35.568077-3.121084 69.935816 2.306532 103.06433 15.488763 37.759999 15.025205 69.594031 38.372959 96.105848 69.071122 4.311189 4.992711 8.40953 10.168594 12.904914 15.621792 1.2689-1.573845 2.355651-2.871397 3.387144-4.209882 21.905916-28.40084 48.380894-51.52449 79.980589-68.560492C640.726803 102.114702 690.157609 93.252871 742.156914 102.019535c60.551074 10.208503 109.529579 40.862663 148.105153 88.101547 36.941354 45.237297 57.025785 97.480148 62.065568 155.578358 0.60989 7.024997 1.054005 14.06432 1.574868 21.097504C953.903525 369.396141 953.903525 371.997386 953.903525 374.597607zM898.728902 371.052874c-0.6191-8.346085-0.99363-16.718777-1.89721-25.03314-5.063319-46.553269-22.228257-88.057545-53.768601-122.822326-42.201148-46.514383-94.556563-69.004607-157.803026-62.721507-43.496653 4.320399-80.099293 23.566742-111.041002 54.027497-20.995173 20.669762-36.102243 45.25367-47.571459 72.210625-2.979868 7.003508-7.963369 11.42726-15.755846 11.453866-7.812943 0.026606-12.828167-4.431939-15.813151-11.397584-9.66615-22.556739-21.629623-43.738154-38.071084-62.10343-35.843346-40.037878-79.982636-63.324234-134.297682-65.148789-50.1594-1.684362-94.006024 15.162328-129.962957 49.536206-59.815317 57.181327-79.199807 127.835504-64.35061 208.373795 5.638417 30.582529 19.49296 58.090023 34.577516 84.993766 30.517037 54.429657 69.413929 102.484116 112.274086 147.477866 71.876004 75.453483 150.243863 143.722332 231.604892 208.66646 3.069919 2.450818 4.858658 2.50403 7.960299 0.030699 45.74895-36.479843 90.509387-74.122161 133.786029-113.508193 47.140647-42.902112 92.65833-87.404676 134.357034-135.719054 37.751812-43.741223 69.933769-91.109044 94.385671-143.530974C891.321188 435.866019 898.244878 404.190599 898.728902 371.052874z" p-id="1955" fill="#fff"></path></svg>\n                                </div>\n                            `;l.innerHTML=i+o+c+d+r,s.appendChild(l)});const l=e.U.dateConvert(t.updateTime);$(".lastUpdate").html(l),$(".music article > ul.toplist_cont").append(s),chrome.storage.local.set({topPlayList:a},()=>{})})},saveSearchList:function(e){chrome.storage.local.get("sps_searchlist",function(t){let s=[];if(t.hasOwnProperty("sps_searchlist")&&t.sps_searchlist.length>0){const a=t.sps_searchlist.indexOf(e);a>=0&&t.sps_searchlist.splice(a,1),t.sps_searchlist.length>4&&t.sps_searchlist.splice(t.sps_searchlist.length-1,1),t.sps_searchlist.unshift(e),s=t.sps_searchlist}else s.push(e);let a=document.createDocumentFragment();s.forEach(e=>{let t=document.createElement("li");t.setAttribute("data-search",e),t.innerText=e,a.appendChild(t)}),$("#historyDiv").html(a),chrome.storage.local.set({sps_searchlist:s},function(e){})})}},subscribe:[{base:"#configLink",bind:"",callback:()=>{chrome.tabs.create({url:"chrome://extensions/?options="+chrome.runtime.id})}},{base:"#homeConfigLink",bind:"",callback:()=>{chrome.tabs.create({url:"chrome://extensions/?options="+chrome.runtime.id})}},{base:"#likeListPlay",bind:"",callback:()=>{chrome.runtime.connect().postMessage({playlist:!0,random:!1})}},{base:"#likeListRandomPlay",bind:"",callback:()=>{chrome.runtime.connect().postMessage({playlist:!0,random:!0})}},{base:"#search",bind:"",callback:()=>{t=$("#isong").val();const s=$(".nav li.active").data("name");e.M.saveSearchList(t),s===e.commentList.favourite&&s===e.commentList.toplist||(e.M.songList(s,t),$(".toplist_cont").addClass("hide"),$(".lyricbox").addClass("hide"),$(".local_cont").addClass("hide"))}},{base:"#isong",bind:"",event:"keypress",callback:s=>{if("13"==s.keyCode){t=$("#isong").val();const s=$(".nav li.active").data("name");e.M.saveSearchList(t),s===e.commentList.favourite&&s===e.commentList.toplist||(e.M.songList(s,t),$(".toplist_cont").addClass("hide"),$(".lyricbox").addClass("hide"),$(".local_cont").addClass("hide"))}}},{base:document,bind:"#historyDiv li",callback:s=>{t=$(s.target).data("search");const a=$(".nav li.active").data("name");e.M.saveSearchList(t),a===e.commentList.favourite&&a===e.commentList.toplist||(e.M.songList(a,t),$(".toplist_cont").addClass("hide"),$(".lyricbox").addClass("hide"),$(".local_cont").addClass("hide"))}},{base:document,bind:".music .open_icon",callback:function(){const t=$(this).data("web"),s=$(this).data("page");switch(t){case"netease":s?window.open(`https://music.163.com/#/song?id=${s}`,"_blank"):e.U.alertFlash("重新收藏此单曲,即可使用网页功能",2e3);break;case"qq":s?window.open(`https://y.qq.com/n/yqq/song/${s}.html`,"_blank"):e.U.alertFlash("重新收藏此单曲,即可使用网页功能",2e3);break;case"xiami":s?window.open(`https://www.xiami.com/song/${s}`,"_blank"):e.U.alertFlash("重新收藏此单曲,即可使用网页功能",2e3);break;case"youtube":s&&window.open(`https://www.youtube.com/watch?v=${s}`,"_blank");break;case"migu":s&&window.open(`http://music.migu.cn/v3/music/song/${s}`,"_blank");break;default:e.U.alertFlash("新开页面功能只支持歌曲播放",2e3)}}},{base:document,bind:".open_radio",callback:function(){const e=$(this).data("page");window.open(e,"_blank")}},{base:document,bind:".music .play_icon",callback:function(){let e=$(this).data("name");try{$(this).data("name").indexOf("_")>0&&(e=$(this).data("name").replace(/_/g," "))}catch(e){console.log("post name error:",e)}const t={id:$(this).data("id"),web:$(this).data("web"),name:e,artist:$(this).data("artist"),duration:$(this).data("duration"),cover:$(this).data("cover"),page:$(this).data("page")};chrome.runtime.connect().postMessage(t)}},{base:document,bind:".music .paid",callback:()=>{$(".alert").html("歌曲需付费，请换其他试听源").addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1500)}},{base:"nav li",bind:"",callback:function(){$(this).addClass("active").siblings().removeClass("active");const s=$(this).data("name");s===e.commentList.favourite?($(".favourite_cont").removeClass("hide"),$(".search_cont").addClass("hide"),$(".toplist_cont").addClass("hide"),$(".local_cont").addClass("hide"),$(".lyricbox").addClass("hide"),e.M.songLikeList()):s===e.commentList.toplist?($(".toplist_cont").removeClass("hide"),$(".search_cont").addClass("hide"),$(".favourite_cont").addClass("hide"),$(".local_cont").addClass("hide"),$(".lyricbox").addClass("hide"),$("#editable-select").editableSelect("placeholder"),e.M.songTopList()):s===e.commentList.localsong?($(".local_cont").removeClass("hide"),$(".favourite_cont").addClass("hide"),$(".search_cont").addClass("hide"),$(".toplist_cont").addClass("hide")):($(".favourite_cont").addClass("hide"),$(".search_cont").removeClass("hide"),$(".toplist_cont").addClass("hide"),$(".local_cont").addClass("hide"),t&&e.M.songList(s,t))}},{base:"#local_upload",bind:"",event:"change",callback:e=>{const t=e.target.files;if(t&&t[0]){const e=URL.createObjectURL(t[0]);chrome.storage.local.set({temp_local_url:e,temp_local_name:t[0].name},()=>{let e=document.createDocumentFragment();document.createElement("ul").className="local_list";let s=document.createElement("li");s.className="self-local-li",s.innerHTML=`\n                            <dl>\n                                <dt>${t[0].name}</dt>\n                            </dl>\n                            `,e.appendChild(s),$(".local_cont .local_list_wrap").html(e)})}}},{base:"#local_play",bind:"",callback:()=>{chrome.storage.local.get(["temp_local_url","temp_local_name"],e=>{const t={type:"local",url:e.temp_local_url,name:e.temp_local_name};chrome.runtime.connect().postMessage(t)})}},{base:document,bind:".req-song",callback:function(s){t=s.target.innerText;const a=$(".nav li.active").data("name");e.M.saveSearchList(t),e.M.songList(a,t),$(".lyricbox").addClass("hide"),$(".toplist_cont").addClass("hide"),$(".local_cont").addClass("hide")}},{base:".stop",bind:"",callback:()=>{chrome.runtime.connect().postMessage("stop")}},{base:".loop",bind:"",callback:()=>{chrome.runtime.connect().postMessage("loop")}},{base:".lyricDiv",bind:"",callback:function(t){$("#lyricDropMenu a").removeClass("show"),$(t.target).addClass("show"),chrome.storage.sync.set({lyricShow:t.target.innerText===e.commentList.lyricMenuShow},()=>{})}},{base:document,bind:".modal-body",callback:function(e){e.target.classList.toggle("active"),$("#myModal").modal("hide");let t=$("#myModal .label.active").data("id");$(".modal-body .label").removeClass("active"),$.ajax({url:`http://rapi.qingting.fm/categories/${t}/channels?with_total=true&page=1&pagesize=36`,success:e=>{const t=e.Data.items;let s=document.createDocumentFragment();t.map((e,t)=>{let a,l=document.createElement("li");try{a=e.nowplaying.title?e.nowplaying.title:"-"}catch(e){a="-"}l.innerHTML=`\n                                    <dl>\n                                        <dt>${e.title}</dt>\n                                        <dd>正在播放:${a}</dd>\n                                    </dl>\n                                    <span>\n                                    <svg data-id=${e.content_id} data-radio=${e.title} t="1519384078654" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M215.618291 917.834029c-55.520501 0-93.25901-44.607964-93.25901-110.988814l0-671.442362c0-66.38085 37.738509-110.98779 93.285616-110.98779 21.22951 0 43.632753 6.590092 66.121953 19.571754L810.298362 380.317888c39.064714 22.529109 61.195757 55.017034 61.195757 90.87266 0 35.815717-22.01234 68.263733-62.018495 91.362824L282.721595 897.664663C259.224438 911.256216 236.847801 917.834029 215.618291 917.834029zM215.644897 78.729086c-34.794457 0-38.971593 39.634696-38.971593 56.673767l0 671.442362c0 17.040095 4.177136 56.67479 38.944987 56.67479 11.403724 0 25.028023-4.242627 38.965453-12.292977l526.661931-335.111291c23.165606-13.406335 35.933397-29.556153 35.933397-44.925189 0-15.408945-12.728906-31.598672-34.967396-44.435025L253.588067 90.424452C240.66064 82.985016 227.061924 78.729086 215.644897 78.729086z" p-id="4450" fill="#cdcdcd"></path><path d="M485.556233 647.034463c-4.52199 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.338359-2.081405-14.719236 4.25593-18.723434l7.333012-4.615111c6.351662-3.978614 14.731516-2.094708 18.723434 4.270257 4.00522 6.337335 2.095731 14.718213-4.25593 18.72241l-7.333012 4.616134C490.528478 646.357034 488.022401 647.034463 485.556233 647.034463z" p-id="4451" fill="#cdcdcd"></path><path d="M286.639834 772.143878c-4.520967 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.337335-2.081405-14.731516 4.269233-18.72241l152.386666-95.859231c6.338359-3.964288 14.719236-2.094708 18.723434 4.270257 3.990894 6.337335 2.082428 14.731516-4.269233 18.723434l-152.386666 95.858208C291.612079 771.468496 289.106002 772.143878 286.639834 772.143878z" p-id="4452" fill="#cdcdcd"></path></svg>\n                                </span>\n                                `,s.appendChild(l)}),$(".radio article > ul").html(s),$(".radio .lyricbox").addClass("hide"),chrome.storage.local.set({lastSearch:"fm"},()=>{Pod.M.updateDB({search:"home",searchList:t,type:"fm"})})}})}},{base:document,bind:".radio .icon",callback:function(){const e={id:$(this).data("id"),radio:$(this).data("radio")};chrome.runtime.connect().postMessage(e)}},{base:"#hk_search",bind:"",callback:()=>{$(".lyricbox").addClass("hide");let e=document.createDocumentFragment();HKList.map((t,s)=>{let a=document.createElement("li");t.type&&"web"===t.type?a.innerHTML=`\n                            <dl>\n                                <dt>${t.title}</dt>\n                                <dd>${t.desc}</dd>\n                            </dl>\n                            <span class="open_span">\n                                <svg t="1553094862876" data-page=${t.address} class="icon open_icons open_radio" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5011" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M895.739313 831.783187c0 34.726919-29.199019 63.956637-63.956637 63.956637l-641.659035 1.061169c-34.726919 0-62.894446-28.167526-62.894446-62.956867l1.030469-641.627313c0-34.788318 29.199019-63.956637 63.956637-63.956637l351.761506 0 0-63.956637-351.761506 0c-69.484537 0-127.913275 71.01438-127.913275 140.468219L64.303027 833.844126c0 69.51626 56.337099 125.852336 125.820614 125.852336l629.073392 0c69.483514 0 140.498918-58.46046 140.498918-127.913275l0-351.761506-63.956637 0L895.739313 831.783187zM926.99927 64.303538 703.869401 64.303538c-18.143219 0-31.94762 14.678304-31.978319 31.978319-0.031722 17.301038 13.8351 31.978319 31.978319 31.978319l140.529617-1.061169L361.944937 587.386968c-12.771885 12.178367-12.771885 31.914874 0 44.094264 12.742209 12.17939 33.44574 12.17939 46.219671 0l486.606657-464.183971 0.968048 152.833851c-0.031722 17.300015 13.8351 31.978319 31.978319 31.978319 18.143219-0.062422 31.946596-14.678304 31.978319-31.978319L959.69595 95.470375C959.726649 78.169337 945.173189 64.24214 926.99927 64.303538z" p-id="5012" fill="#cdcdcd"></path></svg>\n                            </span>\n                            `:a.innerHTML=`\n                            <dl>\n                                <dt>${t.title}</dt>\n                                <dd>${t.desc}</dd>\n                            </dl>\n                            <span>\n                                <svg data-m3u8=${t.address} data-radio=${t.title} t="1519384078654" class="m3u8" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M215.618291 917.834029c-55.520501 0-93.25901-44.607964-93.25901-110.988814l0-671.442362c0-66.38085 37.738509-110.98779 93.285616-110.98779 21.22951 0 43.632753 6.590092 66.121953 19.571754L810.298362 380.317888c39.064714 22.529109 61.195757 55.017034 61.195757 90.87266 0 35.815717-22.01234 68.263733-62.018495 91.362824L282.721595 897.664663C259.224438 911.256216 236.847801 917.834029 215.618291 917.834029zM215.644897 78.729086c-34.794457 0-38.971593 39.634696-38.971593 56.673767l0 671.442362c0 17.040095 4.177136 56.67479 38.944987 56.67479 11.403724 0 25.028023-4.242627 38.965453-12.292977l526.661931-335.111291c23.165606-13.406335 35.933397-29.556153 35.933397-44.925189 0-15.408945-12.728906-31.598672-34.967396-44.435025L253.588067 90.424452C240.66064 82.985016 227.061924 78.729086 215.644897 78.729086z" p-id="4450" fill="#cdcdcd"></path><path d="M485.556233 647.034463c-4.52199 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.338359-2.081405-14.719236 4.25593-18.723434l7.333012-4.615111c6.351662-3.978614 14.731516-2.094708 18.723434 4.270257 4.00522 6.337335 2.095731 14.718213-4.25593 18.72241l-7.333012 4.616134C490.528478 646.357034 488.022401 647.034463 485.556233 647.034463z" p-id="4451" fill="#cdcdcd"></path><path d="M286.639834 772.143878c-4.520967 0-8.924253-2.240017-11.510148-6.351662-3.990894-6.337335-2.081405-14.731516 4.269233-18.72241l152.386666-95.859231c6.338359-3.964288 14.719236-2.094708 18.723434 4.270257 3.990894 6.337335 2.082428 14.731516-4.269233 18.723434l-152.386666 95.858208C291.612079 771.468496 289.106002 772.143878 286.639834 772.143878z" p-id="4452" fill="#cdcdcd"></path></svg>\n                            </span>\n                            `,e.appendChild(a)}),$(".radio article > ul").html(e),chrome.storage.local.set({lastSearch:"fm"},()=>{Pod.M.updateDB({search:"hk",searchList:HKList,type:"fm"})})}},{base:document,bind:".radio .m3u8",callback:function(){const e={m3u8:$(this).data("m3u8"),radio:$(this).data("radio")};chrome.runtime.connect().postMessage(e)}},{base:"#self_search",bind:"",callback:()=>{e.M.handleRadioCustom()}},{base:document,bind:"#radio-submit",callback:t=>{const s=$("#radio-name").val(),a=$("#radio-url").val();s&&a&&-1!==a.indexOf("http")?chrome.storage.sync.get(null,function(t){let l=t.selfRadio;l&&l.length>=10?($(".alert").html("因存储空间限制，暂不支持超过10条").addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1e3)):(l?l.push({name:s,url:a}):l=[{name:s,url:a}],chrome.storage.sync.set({selfRadio:l},()=>{e.M.handleRadioCustom(),$(".alert").html(`已添加电台:${s}`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1e3)}))}):($(".alert").html("请添加电台名称和http开头的播放地址").addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1500))}},{base:document,bind:".radio .custom",callback:function(){const e={url:$(this).data("url"),name:$(this).data("name")};chrome.runtime.connect().postMessage(e)}},{base:document,bind:".self-radio-li .del",callback:t=>{const s=$(t.currentTarget.parentNode);chrome.storage.sync.get("selfRadio",function(t){t.selfRadio.splice(s.index()-1,1),chrome.storage.sync.set({selfRadio:t.selfRadio},t=>{e.M.handleRadioCustom()})})}},{base:".favourite",bind:"",callback:t=>{const s=$(".favourite").hasClass("select");chrome.storage.sync.get(null,function(t){const a=t.likeList;chrome.storage.local.get(null,function(l){if(!l.sps_web||e.commentList.unableCollect.includes(l.sps_web))return $(".alert").html("只支持网易/QQ/Migu收藏，请知晓").addClass("show"),void setTimeout(()=>{$(".alert").removeClass("show")},3e3);let n=[];if(n.push({sps_song:l.sps_song,sps_web:l.sps_web,sps_song_id:l.sps_song_id,sps_artist:l.sps_artist,sps_duration:l.sps_duration,sps_cover:l.sps_cover?l.sps_cover:"",sps_page:l.sps_page?l.sps_page:""}),s){let t=Object.assign([],a);for(let e=0;e<t.length;e++)if(t[e].sps_song_id===l.sps_song_id&&t[e].sps_web===l.sps_web){t.splice(e,1);break}chrome.storage.sync.set({likeList:t},()=>{e.M.songLikeList(),$(".alert").html(`已从收藏删除:${l.sps_song}`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1e3)})}else if(a)if(a&&a.length<40){let t=!1;for(var i=0;i<a.length;i++)if(a[i].sps_song_id===l.sps_song_id&&a[i].sps_web===l.sps_web){t=!0;break}t||(n=n.concat(a),chrome.storage.sync.set({likeList:n}),e.M.songLikeList())}else t.likeList.length>=40&&($(".alert").html("因同步存储空间限制,暂只支持40条").addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1500));else chrome.storage.sync.set({likeList:n}),e.M.songLikeList()})})}},{base:document,bind:".search_cont .fav, .toplist_cont .fav",callback:e=>{const t=$(e.currentTarget),s=e=>{$(".alert").html(`${e}: 成功加入收藏列表`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1500)};chrome.storage.sync.get("likeList",function(e){let a=!1;const l={sps_artist:t.data("artist"),sps_song:t.data("name"),sps_song_id:t.data("id"),sps_web:t.data("web"),sps_duration:t.data("duration"),sps_cover:t.data("cover")?t.data("cover"):"",sps_page:t.data("page")?t.data("page"):""};if(e.likeList&&e.likeList.length){for(var n=0;n<e.likeList.length;n++)if(e.likeList[n].sps_song_id==l.sps_song_id&&e.likeList[n].sps_web==l.sps_web){a=!0;break}a?($(".alert").html(`${l.sps_song}已收藏，无需重复添加`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1500)):(e.likeList.push(l),chrome.storage.sync.set({likeList:e.likeList},e=>{s(l.sps_song)}))}else{let e=[];e.push(l),chrome.storage.sync.set({likeList:e},e=>{s(l.sps_song)})}})}},{base:document,bind:".favourite_cont .del",callback:t=>{const s=$(t.currentTarget.parentNode);chrome.storage.sync.get("likeList",function(t){t.likeList.splice(s.index(),1),chrome.storage.sync.set({likeList:t.likeList},t=>{e.M.songLikeList()})})}},{base:".toplistplay",bind:"",callback:()=>{chrome.runtime.connect().postMessage({topPlay:!0})}},{base:".progress",bind:"",callback:e=>{const t=e.clientX/$(this).width(),s=100*t+"%";$(".progress .controller").css("left",s),$(".progress .line").css("width",s),chrome.runtime.connect().postMessage({position:t})}},{base:".voice",bind:"",callback:e=>{const t=e.clientX/$(this).width(),s=100*t+"%";$(".voice .controller").css("left",s),$(".voice .line").css("width",s),chrome.storage.local.set({volume:parseFloat(t)},function(){})}},{base:"#rangeModal",bind:"",event:"show.bs.modal",callback:function(t){const s=$(t.relatedTarget),{id:a,web:l,name:n,duration:i,artist:o,cover:c,page:d}=s.data();let r=i;$(this).find(".modal-title").text(n);const p=function(){e.tabList[l].lyric(a).then(e=>{let t,s=document.createDocumentFragment();e.lyric&&(t=sps_utils.formatLyrics(e.lyric)).forEach(e=>{let t=document.createElement("li");Number(e.t)<60&&(t.className="highlight"),t.setAttribute("data-time",`${e.t}`),t.innerHTML=`<span>${e.c}</span>`,s.appendChild(t)}),$("#rangeLyrics").html(s)}),$("#rangeSlider").jRange({from:0,to:100,step:.1,format:function(e,t){return sps_utils.songTime(e,r)},width:268,showLabels:!0,showScale:!1,isRange:!0,theme:"theme-blue",ondragend:function(e){let t=!1;const s=e.split(","),a=Number(r)*s[0]/100,l=Number(r)*s[1]/100;$("#rangeLyrics li").each(function(){const e=Number($(this).data("time"));if($(this).removeClass("highlight"),e>=a&&e<=l&&($(this).addClass("highlight"),!t)){const e=19*$(this).index();$("#rangeLyrics").scrollTop(e),t=!0}})}}),$("#rangeConfirm").one("click",function(){const e=$("#rangeSlider").jRange("getValue").split(","),t=sps_utils.songTime(e[0],r),s=sps_utils.songTime(e[1],r),i={id:a,web:l,name:n,artist:o,duration:r,sps_start:t,sps_end:s,range:!0,cover:c,page:d};chrome.runtime.connect().postMessage(i),$("#rangeLyrics").scrollTop(0),$("#rangeModal").modal("hide")})};"xiami"===r?e.tabList.xiami.detail(a).then(e=>{r=e.length,p()}):p()}},{base:"#rangeModal",bind:"",event:"hidden.bs.modal",callback:function(e){$("#rangeSlider").next("div").remove(),$("#rangeSlider").remove(),$('<input type="hidden" id="rangeSlider" value="10,50" />').insertBefore("#rangeLyrics"),$(".modal-body").off("change","#rangeSlider")}},{base:"#voicewrap",bind:"",callback:function(){chrome.storage.local.get(null,function(e){if($("#whitevoice").css({"background-color":["#d8cfaf","#efb140","#de4f43","#4990c8","#51c0b1","#54b1d5","#c6e471","#f89c9d","#b3d8c6","#c9a3cc","#7046db"][Math.round(10*Math.random())]}),$("#whitevoice").removeClass("spaceOutUp").addClass("top spaceInUp"),e.sps_web&&"Voice"===e.sps_web){const s=$("#whitevoice li img").length;for(var t=0;t<s;t++)if($("#whitevoice li img").eq(t).data("name")==e.sps_song){$("#whitevoice li img").eq(t).addClass("select");break}}})}},{base:"#whitevoice li img",bind:"",callback:function(){$(this).hasClass("select")?$("#whitevoice li img").removeClass("select"):($("#whitevoice li img").removeClass("select"),$(this).addClass("select"),chrome.runtime.connect().postMessage({type:"whitevoice",name:$(this).data("name")}))}},{base:".whiteclose",bind:"",callback:function(){$("#whitevoice").removeClass("spaceInUp").addClass("spaceOutUp")}},{base:"#carousel-example-generic",bind:"",event:"slide.bs.carousel",callback:function(e){const t=$(e.relatedTarget).index();chrome.storage.local.set({slide:t},function(){})}},{base:".top-icon",bind:"",event:"mouseenter",callback:function(){$(this).toggleClass("battery-1").toggleClass("battery-3")}},{base:".top-icon",bind:"",event:"mouseleave",callback:function(){$(this).toggleClass("battery-1").toggleClass("battery-3")}}]};var t;e.M=e.method,e.U=e.utils,e.init(),chrome.storage.sync.get(null,function(t){e.M.handleCustomTheme(t);const s=["sps_artist","sps_duration","sps_play","sps_song","sps_song_id","sps_web","last_paused","m3u8"],a=function(e){const s={};return e.forEach(function(e){t.hasOwnProperty(e)&&(s[e]=t[e])}),s}(s);Object.keys(a).length>0&&chrome.storage.local.set(a,function(){chrome.storage.sync.remove(s)}),t.topPlayList&&chrome.storage.sync.remove("topPlayList")}),chrome.storage.local.get(null,function(e){$(".carousel-inner .item").eq(e.slide).addClass("active").siblings().removeClass("active")}),chrome.storage.onChanged.addListener((t,s)=>{e.M.handleLikeStyle(),e.M.handlePlayInfo(),t.sps_cover&&t.sps_cover.newValue&&$(".music header").css({"background-color":"#000","background-size":"cover","background-image":`linear-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.4) ), url(${t.sps_cover.newValue})`})}),chrome.runtime.onConnect.addListener(t=>{t.onMessage.addListener(t=>{t.storageSet?e.M.handleLikeStyle():t.err?($(".alert").html(`${t.name}:访问QQ音乐被拒,请选择其他源`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},1500)):t.url?($(".alert").html(`${t.url}`).addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},2e3)):t.progress?($(".progress .controller").css("left",t.progress),$(".progress .line").css("width",t.progress)):t.xiami_check&&($(".alert").html('请打开 <a href="https://www.xiami.com/search?key=song" target="_blank">xiaimi</a> 处理滑块校验').addClass("show"),setTimeout(()=>{$(".alert").removeClass("show")},4e3))})}),$("#editable-select").editableSelect().on("select.editable-select",function(t,s){e.M.songTopList(s.data("id"))}),document.querySelector(".progress .controller").onmousedown=function(e){chrome.runtime.connect().postMessage("stop"),document.onmousemove=function(e){const t=100*(e.clientX/$(this).width())+"%";$(".progress .controller").css("left",t),$(".progress .line").css("width",t),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}},document.querySelector(".voice .controller").onmousedown=function(e){document.onmousemove=function(e){const t=100*(e.clientX/$(this).width())+"%";$(".voice .controller").css("left",t),$(".voice .line").css("width",t),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}},document.onmouseup=function(e){document.onmousemove=null}};