const QQConfig={lyricRes:""},unescapeHTML=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value};class QQReq{async list(e,t){return await new Promise((a,n)=>{$.ajax({url:"https://c.y.qq.com/soso/fcgi-bin/client_search_cp",data:{ct:24,qqmusic_ver:1298,new_json:1,remoteplace:"txt.yqq.center",searchid:0xbf914301cc34b8,t:0,aggr:1,cr:1,catZhida:1,lossless:0,flag_qc:0,p:1,n:t,w:e,g_tk:710171870,hostUin:0,format:"jsonp",inCharset:"utf8",outCharset:"utf-8",notice:0,platform:"yqq",needNewCode:0},dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jsonp4",success:e=>{let t,n=[];try{t=e.data}catch(a){t=JSON.parse(e).data}t.song.list.map((e,t)=>{n[t]={name:e.name,id:e.mid+"__"+e.id,artists:e.singer.map(e=>e.name),album:e.album.name,duration:e.interval,cover:e.album.mid?`http://imgcache.qq.com/music/photo/mid_album_500/${e.album.mid.substr(e.album.mid.length-2,1)}/${e.album.mid.substr(e.album.mid.length-1,1)}/${e.album.mid}.jpg`:"",page:e.mid}}),a(n)},error:e=>{console.log(e),n(e)}})})}async song(e){var t=`https://u.y.qq.com/cgi-bin/musicu.fcg?loginUin=0&hostUin=0&format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0&data=%7B%22req_0%22%3A%7B%22module%22%3A%22vkey.GetVkeyServer%22%2C%22method%22%3A%22CgiGetVkey%22%2C%22param%22%3A%7B%22guid%22%3A%2210000%22%2C%22songmid%22%3A%5B%22${e=e.split("__")[0]}%22%5D%2C%22songtype%22%3A%5B0%5D%2C%22uin%22%3A%220%22%2C%22loginflag%22`+"%3A1%2C%22platform%22%3A%2220%22%7D%7D%2C%22comm%22%3A%7B%22uin%22%3A0%2C%22format%22%3A%22json%22%2C%22ct%22%3A20%2C%22cv%22%3A0%7D%7D";return await new Promise((e,a)=>{$.ajax({url:t,success:t=>{const a=JSON.parse(t),n=a.req_0.data.sip[0]+a.req_0.data.midurlinfo[0].purl;e(n)},error:e=>{console.log(e),a(e)}})})}async lyric(e){var t=`https://c.y.qq.com/lyric/fcgi-bin/fcg_query_lyric.fcg?g_tk=5381&uin=0&format=jsonp&jsonpCallback=lyricCallback&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&nobase64=1&musicid=${e=e.split("__")[1]}&songtype=0&_=1513437581324`;return await new Promise((e,a)=>{$.get(t,t=>{const a=t.indexOf("({")+1,n=t.indexOf("})")+1,s=t.substring(a,n),r=JSON.parse(s),i=unescapeHTML(r.lyric);let o={lyric:""};i&&(o={lyric:i}),e(o)})})}}const QQ=new QQReq;